---
title: "2025_AFDW_sorting_measurements"
author: "Chlo√© Gilligan"
date: "2025-11-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.


# Snail AFDW Data Organization Script

```{r}
library(tidyverse)

# Set file path
data <- "~/Desktop/Repositories/Nucella_2025/data/2025_Snail_AFDW_data.csv"
```


## Read and Explore Data

```{r}
# Read the data
AFDW_data <- read.csv(data)

# View the structure of the data
str(AFDW_data)
head(AFDW_data)
```

## Extract Pairing Information

```{r}
# Extract base group name and pair number
AFDW_data <- AFDW_data %>%
  mutate(
    # Extract the base name (e.g., "RIR5" from "RIR5_1")
    Base_Group = str_extract(Full.Sample.ID, "^[A-Z]+[0-9]+"),
    # Extract the pair number (e.g., "1" from "RIR5_1")
    Pair_Number = str_extract(Full.Sample.ID, "(?<=_)[0-9]+$")
  )
```

## Create Paired Dataset (Long Format)

```{r}
# Create a paired dataset where each row contains both members of a pair
AFDW_paired_data <- AFDW_data %>%
  filter(!is.na(Base_Group) & !is.na(Pair_Number)) %>%
  arrange(Base_Group, Pair_Number) %>%
  group_by(Base_Group) %>%
  filter(n() == 2) %>%  # Keep only complete pairs
  mutate(Pair_ID = paste0(Base_Group, "_pair")) %>%
  ungroup()

# View the organized data
print(AFDW_paired_data)
```


## Save Organized Data

```{r}
# Save the organized data in long format
write.csv(AFDW_paired_data, 
          "~/Desktop/Repositories/Nucella_2025/data/paired_snail_data_long.csv", 
          row.names = FALSE)


```




